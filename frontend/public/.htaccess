<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /

  # Route API calls to Laravel backend (via symlinked index.php)
  RewriteCond %{REQUEST_URI} ^/api/
  RewriteRule ^api/(.*)$ index.php [L,QSA]

  # Don't rewrite storage files
  RewriteCond %{REQUEST_URI} ^/storage/
  RewriteRule ^ - [L]

  # Don't rewrite existing files or directories
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d

  # Rewrite everything else to index.html for SPA routing
  RewriteRule . /index.html [L]
</IfModule>
